{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, Input } from '@angular/core';\nexport let ProfileComponent = class ProfileComponent {\n  constructor(apiService, toastr) {\n    this.apiService = apiService;\n    this.toastr = toastr;\n    this.pageSize = 10;\n    this.currentPage = 1;\n    this.totalItems = 0;\n    this.totalPages = 1;\n    this.twitterUrl = '';\n    this.pageOptions = [10, 50, 100];\n    this.isOpen = false; // Boolean for Dropdown\n    /**\n     * @description returns pages array with all pages and if pages size exceeds page size then returns array with a -1 to display ...\n     * @returns number[] array of pages\n     */\n    this.displayedPageSize = 5;\n  }\n  // Works on Page Load\n  ngOnInit() {\n    this.getRepoData(this.profileData?.repos_url); // Calling for Default Page Size\n    this.totalItems = this.profileData?.public_repos;\n    this.totalPages = Math.ceil(this.totalItems / this.pageSize >= 0 ? this.totalItems / this.pageSize : 1);\n    this.twitterUrl = `https://twitter.com/${this.profileData?.twitter_username}`;\n  }\n  /**\n   * @description Get Repo Data of the user\n   * @argument path repositories path of the user\n   * @returns void\n   */\n  getRepoData(path) {\n    this.apiService.getData(path + `?page=${this.currentPage}&per_page=${this.pageSize}`).subscribe(data => {\n      this.repoData = data;\n      this.scrollToTop();\n    }, error => {\n      this.toastr.error('Unable to fetch user from Github!', 'Error Message');\n    });\n  }\n  /**\n   * @description Increments current page and calls repo API\n   */\n  nextPage() {\n    if (this.currentPage < this.totalPages) {\n      this.currentPage++;\n      this.getRepoData(this.profileData.repos_url);\n    }\n  }\n  /**\n   * @description Decrements current page and calls repo API\n   */\n  previousPage() {\n    if (this.currentPage > 1) {\n      this.currentPage--;\n      this.getRepoData(this.profileData.repos_url);\n    }\n  }\n  /**\n   * @description Get array of numbers from 0 to n\n   * @param n\n   * @returns Array\n   */\n  getRange(n) {\n    return Array.from({\n      length: n\n    }, (_, index) => index + 1);\n  }\n  /**\n   * @description Sets current page to page and calls repo API\n   * @param page\n   */\n  setPage(page) {\n    if (page === -1) {\n      // Clicked on ellipsis, expand the displayed pages range\n      this.currentPage = this.currentPage + this.displayedPageSize + 1;\n    } else {\n      // Clicked on a regular page, set the current page\n      this.currentPage = page;\n    }\n    this.getRepoData(this.profileData.repos_url);\n  }\n  scrollToTop() {\n    // window.scrollTo({ top: 0, behavior: 'smooth' });\n    var scrollElem = document.querySelector('#user-details');\n    scrollElem?.scrollIntoView({\n      behavior: 'smooth'\n    });\n  }\n  /**\n   * @description Sets page size to size and calls repo API\n   * @param size\n   */\n  setPageSize(size) {\n    this.pageSize = size;\n    this.getRepoData(this.profileData.repos_url);\n    this.currentPage = 1;\n    this.totalPages = Math.ceil(this.totalItems / this.pageSize >= 0 ? this.totalItems / this.pageSize : 1);\n    this.handleDropDown();\n  }\n  handleDropDown() {\n    this.isOpen = !this.isOpen;\n  }\n  get displayedPages() {\n    const pages = [];\n    pages.push(1);\n    if (this.currentPage - this.displayedPageSize > 2) {\n      pages.push(-1);\n    }\n    const start = Math.max(2, this.currentPage - this.displayedPageSize);\n    const end = Math.min(this.totalPages - 1, this.currentPage + this.displayedPageSize);\n    for (let i = start; i <= end; i++) {\n      pages.push(i);\n    }\n    if (this.totalPages - this.currentPage - this.displayedPageSize > 1) {\n      pages.push(-1);\n    }\n    if (this.totalPages > 1) {\n      pages.push(this.totalPages);\n    }\n    return pages;\n  }\n};\n__decorate([Input()], ProfileComponent.prototype, \"profileData\", void 0);\n__decorate([Input()], ProfileComponent.prototype, \"pageSize\", void 0);\nProfileComponent = __decorate([Component({\n  selector: 'app-profile',\n  templateUrl: './profile.component.html'\n})], ProfileComponent);","map":{"version":3,"names":["Component","Input","ProfileComponent","constructor","apiService","toastr","pageSize","currentPage","totalItems","totalPages","twitterUrl","pageOptions","isOpen","displayedPageSize","ngOnInit","getRepoData","profileData","repos_url","public_repos","Math","ceil","twitter_username","path","getData","subscribe","data","repoData","scrollToTop","error","nextPage","previousPage","getRange","n","Array","from","length","_","index","setPage","page","scrollElem","document","querySelector","scrollIntoView","behavior","setPageSize","size","handleDropDown","displayedPages","pages","push","start","max","end","min","i","__decorate","selector","templateUrl"],"sources":["D:\\Documents Volume D\\Intern Ass\\fyleChallenge-main\\fyle-internship-challenge-23-master\\src\\app\\components\\profile\\profile.component.ts"],"sourcesContent":["import { Component, Input } from '@angular/core';\nimport { ApiService } from 'src/app/services/api.service';\nimport { ToastrService } from 'ngx-toastr';\n\n@Component({\n  selector: 'app-profile',\n  templateUrl: './profile.component.html',\n})\nexport class ProfileComponent {\n  constructor(private apiService: ApiService, private toastr: ToastrService) {}\n  // User Data from Search Component\n  @Input() profileData: any;\n  @Input() pageSize: number = 10;\n\n  currentPage: number = 1;\n  totalItems: number = 0;\n  totalPages: number = 1;\n  twitterUrl: string = '';\n  repoData: any; // Data fr094om Repo API\n  pageOptions = [10, 50, 100];\n  isOpen = false; // Boolean for Dropdown\n\n  // Works on Page Load\n  ngOnInit() {\n    this.getRepoData(this.profileData?.repos_url); // Calling for Default Page Size\n    this.totalItems = this.profileData?.public_repos;\n    this.totalPages = Math.ceil(\n      this.totalItems / this.pageSize >= 0 ? this.totalItems / this.pageSize : 1\n    );\n    this.twitterUrl = `https://twitter.com/${this.profileData?.twitter_username}`;\n  }\n\n  /**\n   * @description Get Repo Data of the user\n   * @argument path repositories path of the user\n   * @returns void\n   */\n  getRepoData(path: string) {\n    this.apiService\n      .getData(path + `?page=${this.currentPage}&per_page=${this.pageSize}`)\n      .subscribe(\n        (data: any) => {\n          this.repoData = data;\n          this.scrollToTop();\n        },\n        (error) => {\n          this.toastr.error(\n            'Unable to fetch user from Github!',\n            'Error Message'\n          );\n        }\n      );\n  }\n\n  /**\n   * @description Increments current page and calls repo API\n   */\n  nextPage() {\n    if (this.currentPage < this.totalPages) {\n      this.currentPage++;\n      this.getRepoData(this.profileData.repos_url);\n    }\n  }\n\n  /**\n   * @description Decrements current page and calls repo API\n   */\n  previousPage() {\n    if (this.currentPage > 1) {\n      this.currentPage--;\n      this.getRepoData(this.profileData.repos_url);\n    }\n  }\n\n  /**\n   * @description Get array of numbers from 0 to n\n   * @param n\n   * @returns Array\n   */\n  getRange(n: number): number[] {\n    return Array.from({ length: n }, (_, index) => index + 1);\n  }\n\n  /**\n   * @description Sets current page to page and calls repo API\n   * @param page\n   */\n  setPage(page: number) {\n    if (page === -1) {\n      // Clicked on ellipsis, expand the displayed pages range\n      this.currentPage = this.currentPage + this.displayedPageSize + 1;\n    } else {\n      // Clicked on a regular page, set the current page\n      this.currentPage = page;\n    }\n    this.getRepoData(this.profileData.repos_url);\n  }\n\n  scrollToTop() {\n    // window.scrollTo({ top: 0, behavior: 'smooth' });\n    var scrollElem: Element | null = document.querySelector('#user-details');\n    scrollElem?.scrollIntoView({ behavior: 'smooth' });\n  }\n\n  /**\n   * @description Sets page size to size and calls repo API\n   * @param size\n   */\n  setPageSize(size: number) {\n    this.pageSize = size;\n    this.getRepoData(this.profileData.repos_url);\n    this.currentPage = 1;\n    this.totalPages = Math.ceil(\n      this.totalItems / this.pageSize >= 0 ? this.totalItems / this.pageSize : 1\n    );\n    this.handleDropDown();\n  }\n\n  handleDropDown() {\n    this.isOpen = !this.isOpen;\n  }\n  /**\n   * @description returns pages array with all pages and if pages size exceeds page size then returns array with a -1 to display ...\n   * @returns number[] array of pages\n   */\n  displayedPageSize = 5;\n  get displayedPages(): number[] {\n    const pages = [];\n    pages.push(1);\n\n    if (this.currentPage - this.displayedPageSize > 2) {\n      pages.push(-1);\n    }\n\n    const start = Math.max(2, this.currentPage - this.displayedPageSize);\n    const end = Math.min(\n      this.totalPages - 1,\n      this.currentPage + this.displayedPageSize\n    );\n\n    for (let i = start; i <= end; i++) {\n      pages.push(i);\n    }\n\n    if (this.totalPages - this.currentPage - this.displayedPageSize > 1) {\n      pages.push(-1);\n    }\n\n    if (this.totalPages > 1) {\n      pages.push(this.totalPages);\n    }\n\n    return pages;\n  }\n}\n"],"mappings":";AAAA,SAASA,SAAS,EAAEC,KAAK,QAAQ,eAAe;AAQzC,WAAMC,gBAAgB,GAAtB,MAAMA,gBAAgB;EAC3BC,YAAoBC,UAAsB,EAAUC,MAAqB;IAArD,KAAAD,UAAU,GAAVA,UAAU;IAAsB,KAAAC,MAAM,GAANA,MAAM;IAGjD,KAAAC,QAAQ,GAAW,EAAE;IAE9B,KAAAC,WAAW,GAAW,CAAC;IACvB,KAAAC,UAAU,GAAW,CAAC;IACtB,KAAAC,UAAU,GAAW,CAAC;IACtB,KAAAC,UAAU,GAAW,EAAE;IAEvB,KAAAC,WAAW,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC;IAC3B,KAAAC,MAAM,GAAG,KAAK,CAAC,CAAC;IAqGhB;;;;IAIA,KAAAC,iBAAiB,GAAG,CAAC;EApHuD;EAa5E;EACAC,QAAQA,CAAA;IACN,IAAI,CAACC,WAAW,CAAC,IAAI,CAACC,WAAW,EAAEC,SAAS,CAAC,CAAC,CAAC;IAC/C,IAAI,CAACT,UAAU,GAAG,IAAI,CAACQ,WAAW,EAAEE,YAAY;IAChD,IAAI,CAACT,UAAU,GAAGU,IAAI,CAACC,IAAI,CACzB,IAAI,CAACZ,UAAU,GAAG,IAAI,CAACF,QAAQ,IAAI,CAAC,GAAG,IAAI,CAACE,UAAU,GAAG,IAAI,CAACF,QAAQ,GAAG,CAAC,CAC3E;IACD,IAAI,CAACI,UAAU,GAAG,uBAAuB,IAAI,CAACM,WAAW,EAAEK,gBAAgB,EAAE;EAC/E;EAEA;;;;;EAKAN,WAAWA,CAACO,IAAY;IACtB,IAAI,CAAClB,UAAU,CACZmB,OAAO,CAACD,IAAI,GAAG,SAAS,IAAI,CAACf,WAAW,aAAa,IAAI,CAACD,QAAQ,EAAE,CAAC,CACrEkB,SAAS,CACPC,IAAS,IAAI;MACZ,IAAI,CAACC,QAAQ,GAAGD,IAAI;MACpB,IAAI,CAACE,WAAW,EAAE;IACpB,CAAC,EACAC,KAAK,IAAI;MACR,IAAI,CAACvB,MAAM,CAACuB,KAAK,CACf,mCAAmC,EACnC,eAAe,CAChB;IACH,CAAC,CACF;EACL;EAEA;;;EAGAC,QAAQA,CAAA;IACN,IAAI,IAAI,CAACtB,WAAW,GAAG,IAAI,CAACE,UAAU,EAAE;MACtC,IAAI,CAACF,WAAW,EAAE;MAClB,IAAI,CAACQ,WAAW,CAAC,IAAI,CAACC,WAAW,CAACC,SAAS,CAAC;;EAEhD;EAEA;;;EAGAa,YAAYA,CAAA;IACV,IAAI,IAAI,CAACvB,WAAW,GAAG,CAAC,EAAE;MACxB,IAAI,CAACA,WAAW,EAAE;MAClB,IAAI,CAACQ,WAAW,CAAC,IAAI,CAACC,WAAW,CAACC,SAAS,CAAC;;EAEhD;EAEA;;;;;EAKAc,QAAQA,CAACC,CAAS;IAChB,OAAOC,KAAK,CAACC,IAAI,CAAC;MAAEC,MAAM,EAAEH;IAAC,CAAE,EAAE,CAACI,CAAC,EAAEC,KAAK,KAAKA,KAAK,GAAG,CAAC,CAAC;EAC3D;EAEA;;;;EAIAC,OAAOA,CAACC,IAAY;IAClB,IAAIA,IAAI,KAAK,CAAC,CAAC,EAAE;MACf;MACA,IAAI,CAAChC,WAAW,GAAG,IAAI,CAACA,WAAW,GAAG,IAAI,CAACM,iBAAiB,GAAG,CAAC;KACjE,MAAM;MACL;MACA,IAAI,CAACN,WAAW,GAAGgC,IAAI;;IAEzB,IAAI,CAACxB,WAAW,CAAC,IAAI,CAACC,WAAW,CAACC,SAAS,CAAC;EAC9C;EAEAU,WAAWA,CAAA;IACT;IACA,IAAIa,UAAU,GAAmBC,QAAQ,CAACC,aAAa,CAAC,eAAe,CAAC;IACxEF,UAAU,EAAEG,cAAc,CAAC;MAAEC,QAAQ,EAAE;IAAQ,CAAE,CAAC;EACpD;EAEA;;;;EAIAC,WAAWA,CAACC,IAAY;IACtB,IAAI,CAACxC,QAAQ,GAAGwC,IAAI;IACpB,IAAI,CAAC/B,WAAW,CAAC,IAAI,CAACC,WAAW,CAACC,SAAS,CAAC;IAC5C,IAAI,CAACV,WAAW,GAAG,CAAC;IACpB,IAAI,CAACE,UAAU,GAAGU,IAAI,CAACC,IAAI,CACzB,IAAI,CAACZ,UAAU,GAAG,IAAI,CAACF,QAAQ,IAAI,CAAC,GAAG,IAAI,CAACE,UAAU,GAAG,IAAI,CAACF,QAAQ,GAAG,CAAC,CAC3E;IACD,IAAI,CAACyC,cAAc,EAAE;EACvB;EAEAA,cAAcA,CAAA;IACZ,IAAI,CAACnC,MAAM,GAAG,CAAC,IAAI,CAACA,MAAM;EAC5B;EAMA,IAAIoC,cAAcA,CAAA;IAChB,MAAMC,KAAK,GAAG,EAAE;IAChBA,KAAK,CAACC,IAAI,CAAC,CAAC,CAAC;IAEb,IAAI,IAAI,CAAC3C,WAAW,GAAG,IAAI,CAACM,iBAAiB,GAAG,CAAC,EAAE;MACjDoC,KAAK,CAACC,IAAI,CAAC,CAAC,CAAC,CAAC;;IAGhB,MAAMC,KAAK,GAAGhC,IAAI,CAACiC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC7C,WAAW,GAAG,IAAI,CAACM,iBAAiB,CAAC;IACpE,MAAMwC,GAAG,GAAGlC,IAAI,CAACmC,GAAG,CAClB,IAAI,CAAC7C,UAAU,GAAG,CAAC,EACnB,IAAI,CAACF,WAAW,GAAG,IAAI,CAACM,iBAAiB,CAC1C;IAED,KAAK,IAAI0C,CAAC,GAAGJ,KAAK,EAAEI,CAAC,IAAIF,GAAG,EAAEE,CAAC,EAAE,EAAE;MACjCN,KAAK,CAACC,IAAI,CAACK,CAAC,CAAC;;IAGf,IAAI,IAAI,CAAC9C,UAAU,GAAG,IAAI,CAACF,WAAW,GAAG,IAAI,CAACM,iBAAiB,GAAG,CAAC,EAAE;MACnEoC,KAAK,CAACC,IAAI,CAAC,CAAC,CAAC,CAAC;;IAGhB,IAAI,IAAI,CAACzC,UAAU,GAAG,CAAC,EAAE;MACvBwC,KAAK,CAACC,IAAI,CAAC,IAAI,CAACzC,UAAU,CAAC;;IAG7B,OAAOwC,KAAK;EACd;CACD;AA/IUO,UAAA,EAARvD,KAAK,EAAE,C,oDAAkB;AACjBuD,UAAA,EAARvD,KAAK,EAAE,C,iDAAuB;AAJpBC,gBAAgB,GAAAsD,UAAA,EAJ5BxD,SAAS,CAAC;EACTyD,QAAQ,EAAE,aAAa;EACvBC,WAAW,EAAE;CACd,CAAC,C,EACWxD,gBAAgB,CAkJ5B"},"metadata":{},"sourceType":"module","externalDependencies":[]}